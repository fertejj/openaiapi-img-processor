# OpenAI Image Processor API

A Node.js/Express backend that processes images using OpenAI's Vision API and returns text descriptions based on a configurable system prompt.

## Features

- **Image Processing**: Upload an image and get a text description generated by OpenAI GPT-4o.
- **Dynamic System Prompt**: Update the system prompt on the fly to change how the AI analyzes images.
- **Swagger Documentation**: Interactive API documentation available at `/api-docs`.
- **Validation**: Input validation for API endpoints.
- **Security**: Basic security headers with Helmet.

## Prerequisites

- Node.js (v18 or higher)
- OpenAI API Key

## Installation

1.  Clone the repository.
2.  Install dependencies:
    ```bash
    npm install
    ```
3.  Create a `.env` file based on `.env.example` and add your OpenAI API Key:
    ```env
    PORT=3000
    OPENAI_API_KEY=sk-...
    ```

## Usage

1.  Start the server:
    ```bash
    npm start
    ```
    For development with auto-reload:
    ```bash
    npm run dev
    ```

2.  Open your browser and navigate to:
    `http://localhost:3000/api-docs`

3.  Use the Swagger UI to test the endpoints:
    - **PUT /api/system-prompt**: Set the behavior (e.g., "Describe this image in a poetic style").
    - **POST /api/process-image**: Upload an image file to get the description.

## Project Structure

- `src/app.js`: Main application entry point.
- `src/config`: Configuration files.
- `src/controllers`: Request handlers.
- `src/middleware`: Custom middleware (upload, validation).
- `src/routes`: API route definitions.
- `src/services`: Business logic (OpenAI interaction).
- `src/docs`: Swagger configuration.

## Best Practices Implemented

- **Layered Architecture**: Separation of concerns (Controllers, Services, Routes).
- **Environment Variables**: Sensitive data management using `dotenv`.
- **Input Validation**: Request validation using `express-validator`.
- **Security**: `helmet` for headers, `cors` for cross-origin requests.
- **Documentation**: OpenAPI/Swagger for clear API contracts.
- **Error Handling**: Centralized error handling middleware.
